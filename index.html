<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì„±í˜¸ â™¥ ìœ ì› - ê²°í˜¼ì„ ì•Œë¦½ë‹ˆë‹¤</title>

<!-- ì¹´ì¹´ì˜¤í†¡ ë¯¸ë¦¬ë³´ê¸°ìš© ë©”íƒ€ íƒœê·¸ -->
<meta name="description" content="ì„±í˜¸ì™€ ìœ ì›ì´ ì‚¬ë‘ìœ¼ë¡œ í•˜ë‚˜ê°€ ë˜ì–´ ìƒˆë¡œìš´ ì¸ìƒì„ ì‹œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë©€ë¦¬ì„œë‚˜ë§ˆ ì¶•ë³µí•´ ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.">
<meta name="keywords" content="ê²°í˜¼, ì›¨ë”©, ì„±í˜¸, ìœ ì›, ê²°í˜¼ì†Œì‹">
<meta name="author" content="ì„±í˜¸ & ìœ ì›">

<!-- Open Graph ë©”íƒ€ íƒœê·¸ (ì¹´ì¹´ì˜¤í†¡, í˜ì´ìŠ¤ë¶ ë“±) -->
<meta property="og:type" content="website">
<meta property="og:title" content="ì„±í˜¸ â™¥ ìœ ì› - ê²°í˜¼ì„ ì•Œë¦½ë‹ˆë‹¤">
<meta property="og:description" content="ë‘ ì‚¬ëŒì´ ì‚¬ë‘ìœ¼ë¡œ í•˜ë‚˜ê°€ ë˜ì–´ ìƒˆë¡œìš´ ì¸ìƒì„ ì‹œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ëœ»í•œ ì¶•ë³µ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ğŸ’•">
<meta property="og:image" content="https://picsum.photos/800/600?random=1">
<meta property="og:url" content="">
<meta property="og:site_name" content="ì„±í˜¸ â™¥ ìœ ì› ì›¨ë”© ì¹´ë“œ">
<meta property="og:locale" content="ko_KR">

<!-- íŠ¸ìœ„í„° ì¹´ë“œ ë©”íƒ€ íƒœê·¸ -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ì„±í˜¸ â™¥ ìœ ì› - ê²°í˜¼ì„ ì•Œë¦½ë‹ˆë‹¤">
<meta name="twitter:description" content="ë‘ ì‚¬ëŒì´ ì‚¬ë‘ìœ¼ë¡œ í•˜ë‚˜ê°€ ë˜ì–´ ìƒˆë¡œìš´ ì¸ìƒì„ ì‹œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ’•">
<meta name="twitter:image" content="https://picsum.photos/800/600?random=1">

<!-- ì¹´ì¹´ì˜¤í†¡ ì „ìš© ë©”íƒ€ íƒœê·¸ -->
<meta property="kakao:title" content="ì„±í˜¸ â™¥ ìœ ì› ê²°í˜¼ ì†Œì‹">
<meta property="kakao:description" content="ë‘ ì‚¬ëŒì´ í•˜ë‚˜ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ’• ì¶•ë³µí•´ ì£¼ì„¸ìš”!">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600&family=Great+Vibes&family=Noto+Sans+KR:wght@300;400;500&family=Noto+Serif+KR:wght@300;400;500&family=Playfair+Display:ital,wght@0,400;0,500;1,400&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Cinzel:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
    --main-color: #ff6b6b;
    --text-color: #444;
    --light-text: #888;
    --background: #f9f9f9;
    --highlight: #5968a3;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: "Noto Serif KR", serif, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    color: var(--text-color);
    line-height: 1.7;
    background-color: var(--background);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.container {
    max-width: 768px;
    width: 100%;
    margin: 0 auto;
    padding: 20px;
    background-color: white;
}

.header {
    text-align: center;
    padding: 60px 0 30px;
}

.title {
    font-family: 'Cinzel', serif;
    font-weight: 500;
    color: #6bb4ff9c;
    font-size: 26px;
    letter-spacing: 3px;
}

.date-location {
    margin: 20px 0;
    font-family: "Noto Serif KR", serif, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    font-size: 16px;
    color: #5968a3;
    line-height: 1.8;
}

.divider {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 15px 0;
}

.divider .circle {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background-color: #ddd;
    margin: 0 5px;
}

.divider .circle.active {
    background-color: var(--main-color);
}

.main-image, .couple-photo {
    width: 100%;
    height: auto;
    margin: 20px 0;
}

.section {
    padding: 40px 20px;
    text-align: center;
}

.section-title {
    position: relative;
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    font-weight: 400;
    margin-bottom: 30px;
    color: var(--main-color);
}

.section-title::after {
    content: '';
    display: block;
    width: 20px;
    height: 1px;
    background-color: var(--main-color);
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
}

.greeting {
    font-family: "Noto Serif KR", serif, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    font-size: 16px;
    line-height: 2;
    margin-bottom: 30px;
}

.gallery {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
}

.gallery-item {
    width: calc(33.33% - 10px);
    cursor: pointer;
    transition: transform 0.3s;
    -webkit-tap-highlight-color: transparent;
    position: relative;
    z-index: 1;
    touch-action: manipulation;
    /* ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ê°œì„  */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    outline: none;
    border: 2px solid transparent;
}

.gallery-item:hover, .gallery-item:active, .gallery-item:focus {
    transform: scale(1.05);
    border-color: var(--main-color);
}

.gallery-item img {
    width: 100%;
    height: 100px;
    object-fit: cover;
    /* ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì €ì—ì„œ ì´ë¯¸ì§€ í„°ì¹˜ ê°œì„  */
    pointer-events: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    justify-content: center;
    align-items: center;
    overflow: hidden;
    touch-action: none;
}

.modal-container {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 90%;
    max-width: 1200px;
}

.modal-content {
    display: block;
    width: auto;
    max-width: 90%;
    max-height: 80vh;
    margin: 0 auto;
    object-fit: contain;
}

.prev, .next {
    position: absolute;
    cursor: pointer;
    color: white;
    font-size: 40px;
    user-select: none;
    z-index: 1010;
}

.prev {
    left: 10px;
}

.next {
    right: 10px;
}

.close {
    position: absolute;
    top: 20px;
    right: 30px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
    z-index: 1010;
}

.btn {
    padding: 10px 20px;
    border-radius: 20px;
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-male {
    background-color: #6b96ff;
    color: white;
    border: none;
}

.handwritten-letter {
    background-color: #f8f8f8;
    border-radius: 10px;
    padding: 30px;
    margin: 40px 0;
    color: var(--main-color);
    font-family: "Noto Serif KR", serif;
    line-height: 2;
    text-align: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.letter-text {
    position: relative;
    margin-bottom: 15px;
}

.letter-text::after {
    content: '';
    display: block;
    width: 100%;
    height: 1px;
    background-color: #eee;
    margin-top: 15px;
}

.letter-sign {
    font-style: italic;
    text-align: right;
    padding-right: 20px;
}

.share-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 30px 0;
}

.share-button {
    padding: 10px 15px;
    background-color: #f0f0f0;
    border-radius: 5px;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    border: none;
    color: #555;
}

.share-button:hover {
    background-color: #e0e0e0;
}

.guestbook {
    width: 100%;
    margin: 40px 0;
    padding: 20px;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.guestbook-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 30px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.form-group label {
    font-size: 14px;
    color: var(--light-text);
}

.form-group input, .form-group textarea {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-family: inherit;
}

.form-group textarea {
    min-height: 100px;
    resize: vertical;
}

.guestbook-submit {
    background-color: var(--main-color);
    color: white;
    border: none;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s;
}

.guestbook-submit:hover {
    background-color: #e05d5d;
}

.footer {
    text-align: center;
    padding: 20px;
    font-size: 12px;
    color: var(--light-text);
    background-color: #f9f9f9;
    width: 100%;
    margin-top: 30px;
}

@media (max-width: 768px) {
    .gallery-item {
        width: calc(50% - 10px);
        height: auto;
        aspect-ratio: 1/1;
    }
  
    .gallery-item img {
        height: 100%;
        object-fit: cover;
    }
  
    .section-title {
        font-size: 24px;
    }
    
    .greeting {
        font-size: 14px;
    }
    
    .handwritten-letter {
        padding: 20px;
    }
    
    .modal-container {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
  
    .prev, .next {
        font-size: 30px;
        background-color: rgba(0, 0, 0, 0.3);
        padding: 10px;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
  
    .close {
        top: 10px;
        right: 15px;
    }
  
    .modal-content {
        max-width: 100%;
        max-height: 80vh;
    }
}
</style>
</head>
<body>
<div class="container">
<div class="header">
    <h1 class="title">WEDDING NOTIFICATION</h1>
    <div class="divider">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle active"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>
    <div class="date-location">
        2025ë…„ 6ì›” 3ì¼<br>
        ë‘ ì‚¬ëŒì´ í•˜ë‚˜ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤
    </div>
</div>

<img src="https://picsum.photos/800/600?random=1" alt="Wedding Venue" class="main-image">

<div class="section">
    <h2 class="section-title">ê²°í˜¼ì„ ì•Œë¦½ë‹ˆë‹¤</h2>
    <div class="greeting">
        ì„œë¡œ ë‹¤ë¥¸ ë‘ ì‚¬ëŒì´ ë§Œë‚˜<br>
        ì‚¬ë‘ìœ¼ë¡œ í•˜ë‚˜ê°€ ë˜ì–´<br>
        ìƒˆë¡œìš´ ì¸ìƒì„ ì‹œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.<br><br>
        ë¶€ì¡±í•œ ì €í¬ì—ê²Œ ë³´ë‚´ì£¼ì‹ <br>
        ë”°ëœ»í•œ ê´€ì‹¬ê³¼ ì‚¬ë‘ì— ê°ì‚¬ë“œë¦¬ë©°<br>
        ì•ìœ¼ë¡œë„ ë§ì€ ê²©ë ¤ ë¶€íƒë“œë¦½ë‹ˆë‹¤.
    </div>
    <div class="parents">
        ë°°ëª…ì„ ì˜ ì•„ë“¤ <strong>ì„±í˜¸</strong><br>
        ê¹€ë³‘ìˆ˜ Â· ì •í•´ì£¼ì˜ ë”¸ <strong>ìœ ì›</strong>
    </div>
</div>

<img src="https://picsum.photos/800/600?random=2" alt="Couple Photo" class="couple-photo">

<div class="section">
    <h2 class="section-title">ê°¤ëŸ¬ë¦¬</h2>
    <div class="gallery" id="photoGallery">
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=3" alt="Wedding Photo 1" data-index="1">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=4" alt="Wedding Photo 2">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=5" alt="Wedding Photo 3">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=6" alt="Wedding Photo 4">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=7" alt="Wedding Photo 5">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=8" alt="Wedding Photo 6">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=9" alt="Wedding Photo 7">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=10" alt="Wedding Photo 8">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=11" alt="Wedding Photo 9">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=12" alt="Wedding Photo 10">
        </div>
    </div>
</div>

<div class="section">
    <h2 class="section-title">ìƒˆë¡œìš´ ì‹œì‘</h2>
    <div class="location-info">
        ì¤‘ìš”í•œ ì‹œì‘ì˜ ìˆœê°„ì— <br>
        ê°ì‚¬í•œ ë¶„ë“¤ì„ í•œ ìë¦¬ì— ëª¨ì…”ì•¼ ë§ˆë•…í•˜ì§€ë§Œ <br>
        ì €í¬ ë‘ ì‚¬ëŒì˜ ëœ»ì— ë”°ë¼ ê²°í˜¼ì‹ì€ ìƒëµí•˜ê³ <br>
        ê°€ì¡±ë“¤ê³¼ì˜ ì‹œê°„ìœ¼ë¡œ ëŒ€ì²´í•˜ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤. <br><br>
        ë„ˆê·¸ëŸ¬ìš´ ë§ˆìŒìœ¼ë¡œ ì¶•í•˜ì˜ í•œë§ˆë”” í•´ì£¼ì‹œë©´<br>
        í‰ìƒ ì†Œì¤‘íˆ ê°„ì§í•˜ë©° ì‚´ê² ìŠµë‹ˆë‹¤.
    </div>
</div>

<div class="handwritten-letter">
    <div class="letter-text">ë‘ ì‚¬ëŒì´ í•¨ê»˜ ê±¸ì–´ê°ˆ ê¸¸ì´</div>
    <div class="letter-text">ì–¸ì œë‚˜ ì‚¬ë‘ê³¼ í–‰ë³µìœ¼ë¡œ ê°€ë“í•˜ê¸¸</div>
    <div class="letter-text">ë”°ëœ»í•œ ë§ˆìŒìœ¼ë¡œ ì§€ì¼œë´ ì£¼ì„¸ìš”</div>
    <div class="letter-sign">- ì„±í˜¸ & ìœ ì› -</div>
</div>

<div class="section">
    <h2 class="section-title">ì¶•í•˜ì™€ ê²©ë ¤ì˜ ë§ˆìŒì„ ì „í•˜ì„¸ìš”</h2>
    <div class="guestbook">
        <form class="guestbook-form" id="guestbookForm">
            <div class="form-group">
                <label for="guestName">ì´ë¦„</label>
                <input type="text" id="guestName" required>
            </div>
            <div class="form-group">
                <label for="guestMessage">ë©”ì‹œì§€</label>
                <textarea id="guestMessage" required></textarea>
            </div>
            <button type="submit" class="guestbook-submit">ì¶•í•˜ ë©”ì‹œì§€ ì „ì†¡</button>
        </form>
    </div>
</div>

<div class="share-buttons">
    <button class="share-button" onclick="copyLink()">ë§í¬ ë³µì‚¬</button>
</div>
</div>

<div id="imageModal" class="modal">
  <span class="close" onclick="closeModal()">&times;</span>
  <div class="modal-container">
    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
    <img class="modal-content" id="modalImage">
    <a class="next" onclick="plusSlides(1)">&#10095;</a>
  </div>
</div>

<div class="footer">
Copyright Â© 2025 Wedding. All rights reserved.
</div>

<script>
// ì „ì—­ ë³€ìˆ˜ ë° ìƒìˆ˜
let slideIndex = 1;
let touchStartX = 0;
let touchEndX = 0;
const modalElement = document.getElementById('imageModal');
const modalImage = document.getElementById('modalImage');
const googleScriptUrl = "https://script.google.com/macros/s/AKfycbxOYPrBfGxApYH-8ffsgxJwjHc380NAyJPmZcy52YoDW-2wnShRLuK0KIxLMJyIo1sKCQ/exec";

// ì´ˆê¸°í™” í•¨ìˆ˜ - DOMContentLoadedì—ì„œ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
document.addEventListener('DOMContentLoaded', function() {
    initializeGallery();
    initializeModal();
    initializeGuestbook();
    preloadImages();
});

// ê°¤ëŸ¬ë¦¬ ì´ˆê¸°í™” - ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € í˜¸í™˜ì„± ê°œì„ 
function initializeGallery() {
    const galleryItems = document.querySelectorAll('.gallery-item');
    
    galleryItems.forEach((item, index) => {
        // ì—¬ëŸ¬ ì´ë²¤íŠ¸ íƒ€ì…ì„ ë™ì‹œì— ë“±ë¡í•˜ì—¬ í˜¸í™˜ì„± ê°œì„ 
        const events = ['click', 'touchend', 'touchstart'];
        
        events.forEach(eventType => {
            item.addEventListener(eventType, function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // touchstartëŠ” ëª¨ë‹¬ì„ ì—´ì§€ ì•Šê³  ë‹¨ìˆœíˆ í™œì„±í™”ë§Œ
                if (eventType === 'touchstart') {
                    item.style.borderColor = 'var(--main-color)';
                    return;
                }
                
                // clickê³¼ touchendì—ì„œ ëª¨ë‹¬ ì—´ê¸°
                if (eventType === 'click' || eventType === 'touchend') {
                    console.log('Gallery item clicked/touched:', index + 1);
                    openModal();
                    currentSlide(index + 1);
                }
            }, { passive: false });
        });
        
        // í„°ì¹˜ ì´ë²¤íŠ¸ ì¢…ë£Œ ì‹œ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
        item.addEventListener('touchcancel', function() {
            item.style.borderColor = 'transparent';
        });
        
        // ë§ˆìš°ìŠ¤ ë¦¬ë¸Œ ì‹œ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” (ë°ìŠ¤í¬í†±ìš©)
        item.addEventListener('mouseleave', function() {
            item.style.borderColor = 'transparent';
        });
        
        // í¬ì»¤ìŠ¤ ì´ë²¤íŠ¸ ì¶”ê°€ (í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›)
        item.setAttribute('tabindex', '0');
        item.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                openModal();
                currentSlide(index + 1);
            }
        });
    });
    
    // ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€ ë° ëŒ€ì²´ ì´ë²¤íŠ¸ ë“±ë¡
    if (isKakaoInAppBrowser()) {
        console.log('ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€ë¨');
        addKakaoCompatibilityFixes();
    }
}

// ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€ í•¨ìˆ˜
function isKakaoInAppBrowser() {
    const userAgent = navigator.userAgent.toLowerCase();
    return userAgent.includes('kakaotalk') || 
           userAgent.includes('kakao') ||
           (userAgent.includes('mobile') && window.DeviceMotionEvent === undefined);
}

// ì¹´ì¹´ì˜¤í†¡ í˜¸í™˜ì„± ìˆ˜ì • í•¨ìˆ˜
function addKakaoCompatibilityFixes() {
    const galleryItems = document.querySelectorAll('.gallery-item');
    
    galleryItems.forEach((item, index) => {
        // ëŒ€ì²´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€
        item.addEventListener('mousedown', function(e) {
            setTimeout(() => {
                openModal();
                currentSlide(index + 1);
            }, 100);
        });
        
        // ë”ë¸”íƒ­ ì´ë²¤íŠ¸ ì§€ì›
        let tapCount = 0;
        item.addEventListener('touchend', function(e) {
            tapCount++;
            if (tapCount === 1) {
                setTimeout(() => {
                    if (tapCount === 1) {
                        openModal();
                        currentSlide(index + 1);
                    }
                    tapCount = 0;
                }, 300);
            }
        });
    });
}

// ëª¨ë‹¬ ì´ˆê¸°í™”
function initializeModal() {
    const modalContainer = document.querySelector('.modal-container');
    if (modalContainer) {
        modalContainer.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        }, false);
        
        modalContainer.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, false);
    }
    
    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    window.onclick = function(event) {
        if (event.target == modalElement) {
            closeModal();
        }
    }
    
    // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
    document.onkeydown = function(e) {
        if (modalElement.style.display === "flex") {
            if (e.key === "ArrowLeft") {
                plusSlides(-1);
            } else if (e.key === "ArrowRight") {
                plusSlides(1);
            } else if (e.key === "Escape") {
                closeModal();
            }
        }
    }
}

// ë°©ëª…ë¡ ì´ˆê¸°í™”
function initializeGuestbook() {
    const guestbookForm = document.getElementById('guestbookForm');
    if (guestbookForm) {
        guestbookForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('guestName').value;
            const message = document.getElementById('guestMessage').value;
            
            if (name && message) {
                saveGuestbookEntry(name, message);
                sendToSlack(name, message);
                guestbookForm.reset();
            }
        });
    }
}

// ì´ë¯¸ì§€ í”„ë¦¬ë¡œë“œ
function preloadImages() {
    const galleryImages = document.querySelectorAll('.gallery-item img');
    galleryImages.forEach(img => {
        const preloadImg = new Image();
        preloadImg.src = img.src;
    });
}

// ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜ë“¤
function openModal() {
    modalElement.style.display = "flex";
    const scrollY = window.scrollY;
    document.body.style.position = 'fixed';
    document.body.style.width = '100%';
    document.body.style.top = `-${scrollY}px`;
    document.body.style.overflow = 'hidden';
    document.body.dataset.scrollY = scrollY;
}

function closeModal() {
    modalElement.style.display = "none";
    const scrollY = document.body.dataset.scrollY;
    document.body.style.position = '';
    document.body.style.width = '';
    document.body.style.top = '';
    document.body.style.overflow = '';
    window.scrollTo(0, parseInt(scrollY || '0'));
}

function plusSlides(n) {
    slideIndex += n;
    showSlides();
}

function currentSlide(n) {
    slideIndex = n;
    showSlides();
}

function showSlides() {
    const galleryImages = document.querySelectorAll('.gallery-item img');
    const totalImages = galleryImages.length;
    
    if (slideIndex > totalImages) {
        slideIndex = 1;
    }
    if (slideIndex < 1) {
        slideIndex = totalImages;
    }
    
    modalImage.src = '';
    const img = new Image();
    img.onload = function() {
        modalImage.src = this.src;
    };
    img.src = galleryImages[slideIndex-1].src;
}

function handleSwipe() {
    if (touchEndX < touchStartX - 50) {
        plusSlides(1);
    } else if (touchEndX > touchStartX + 50) {
        plusSlides(-1);
    }
}

// ë°©ëª…ë¡ ê´€ë ¨ í•¨ìˆ˜ë“¤
function saveGuestbookEntry(name, message) {
    const entries = JSON.parse(localStorage.getItem('weddingGuestbook') || '[]');
    const newEntry = {
        name: name,
        message: message,
        date: new Date().toISOString()
    };
    entries.push(newEntry);
    localStorage.setItem('weddingGuestbook', JSON.stringify(entries));
}

function sendToSlack(name, message) {
    const data = {
        name: name,
        message: message,
        date: formatDate(new Date())
    };
    
    const url = new URL(googleScriptUrl);
    url.searchParams.append('name', data.name);
    url.searchParams.append('message', data.message);
    url.searchParams.append('date', data.date);

    fetch(url.toString(), {
        method: 'GET',
        mode: 'no-cors',
    })
    .then(() => {
        console.log("ìŠ¬ë™ ìš”ì²­ ì™„ë£Œ");
        showNotification("ì¶•í•˜ ë©”ì‹œì§€ê°€ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ’Œ");
    })
    .catch(error => {
        console.error("ìŠ¬ë™ ìš”ì²­ ì˜¤ë¥˜:", error);
        showNotification("ì¶•í•˜ ë©”ì‹œì§€ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ’Œ");
    });
}

// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
function formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}.${month}.${day}`;
}

function copyLink() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => {
        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }).catch(() => {
        // í´ë°±
        const dummy = document.createElement('input');
        document.body.appendChild(dummy);
        dummy.value = url;
        dummy.select();
        document.execCommand('copy');
        document.body.removeChild(dummy);
        alert('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
    });
}

function showNotification(message) {
    const existingNotification = document.querySelector('.notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    
    Object.assign(notification.style, {
        position: 'fixed',
        bottom: '20px',
        left: '50%',
        transform: 'translateX(-50%)',
        backgroundColor: 'var(--main-color)',
        color: 'white',
        padding: '12px 20px',
        borderRadius: '30px',
        boxShadow: '0 2px 10px rgba(0,0,0,0.2)',
        zIndex: '1000',
        fontSize: '14px',
        fontWeight: '500',
        opacity: '0',
        transition: 'opacity 0.3s ease-in-out'
    });
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.opacity = '1';
    }, 10);
    
    setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 3000);
}
</script>
</body>
</html>
