<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÏÑ±Ìò∏ ‚ô• Ïú†Ïõê - Í≤∞ÌòºÏùÑ ÏïåÎ¶ΩÎãàÎã§</title>

<!-- Ïπ¥Ïπ¥Ïò§ÌÜ° ÎØ∏Î¶¨Î≥¥Í∏∞Ïö© Î©îÌÉÄ ÌÉúÍ∑∏ -->
<meta name="description" content="ÏÑ±Ìò∏ÏôÄ Ïú†ÏõêÏù¥ ÏÇ¨ÎûëÏúºÎ°ú ÌïòÎÇòÍ∞Ä ÎêòÏñ¥ ÏÉàÎ°úÏö¥ Ïù∏ÏÉùÏùÑ ÏãúÏûëÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§. Î©ÄÎ¶¨ÏÑúÎÇòÎßà Ï∂ïÎ≥µÌï¥ Ï£ºÏãúÎ©¥ Í∞êÏÇ¨ÌïòÍ≤†ÏäµÎãàÎã§.">
<meta name="keywords" content="Í≤∞Ìòº, Ïõ®Îî©, ÏÑ±Ìò∏, Ïú†Ïõê, Í≤∞ÌòºÏÜåÏãù">
<meta name="author" content="ÏÑ±Ìò∏ & Ïú†Ïõê">

<!-- Open Graph Î©îÌÉÄ ÌÉúÍ∑∏ (Ïπ¥Ïπ¥Ïò§ÌÜ°, ÌéòÏù¥Ïä§Î∂Å Îì±) -->
<meta property="og:type" content="website">
<meta property="og:title" content="ÏÑ±Ìò∏ ‚ô• Ïú†Ïõê - Í≤∞ÌòºÏùÑ ÏïåÎ¶ΩÎãàÎã§">
<meta property="og:description" content="Îëê ÏÇ¨ÎûåÏù¥ ÏÇ¨ÎûëÏúºÎ°ú ÌïòÎÇòÍ∞Ä ÎêòÏñ¥ ÏÉàÎ°úÏö¥ Ïù∏ÏÉùÏùÑ ÏãúÏûëÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§. Îî∞ÎúªÌïú Ï∂ïÎ≥µ Î∂ÄÌÉÅÎìúÎ¶ΩÎãàÎã§. üíï">
<meta property="og:image" content="https://picsum.photos/800/600?random=1">
<meta property="og:url" content="">
<meta property="og:site_name" content="ÏÑ±Ìò∏ ‚ô• Ïú†Ïõê Ïõ®Îî© Ïπ¥Îìú">
<meta property="og:locale" content="ko_KR">

<!-- Ìä∏ÏúÑÌÑ∞ Ïπ¥Îìú Î©îÌÉÄ ÌÉúÍ∑∏ -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ÏÑ±Ìò∏ ‚ô• Ïú†Ïõê - Í≤∞ÌòºÏùÑ ÏïåÎ¶ΩÎãàÎã§">
<meta name="twitter:description" content="Îëê ÏÇ¨ÎûåÏù¥ ÏÇ¨ÎûëÏúºÎ°ú ÌïòÎÇòÍ∞Ä ÎêòÏñ¥ ÏÉàÎ°úÏö¥ Ïù∏ÏÉùÏùÑ ÏãúÏûëÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§. üíï">
<meta name="twitter:image" content="https://picsum.photos/800/600?random=1">

<!-- Ïπ¥Ïπ¥Ïò§ÌÜ° Ï†ÑÏö© Î©îÌÉÄ ÌÉúÍ∑∏ -->
<meta property="kakao:title" content="ÏÑ±Ìò∏ ‚ô• Ïú†Ïõê Í≤∞Ìòº ÏÜåÏãù">
<meta property="kakao:description" content="Îëê ÏÇ¨ÎûåÏù¥ ÌïòÎÇòÍ∞Ä ÎêòÏóàÏäµÎãàÎã§ üíï Ï∂ïÎ≥µÌï¥ Ï£ºÏÑ∏Ïöî!">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600&family=Great+Vibes&family=Noto+Sans+KR:wght@300;400;500&family=Noto+Serif+KR:wght@300;400;500&family=Playfair+Display:ital,wght@0,400;0,500;1,400&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Cinzel:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
    --main-color: #ff6b6b;
    --text-color: #444;
    --light-text: #888;
    --background: #f9f9f9;
    --highlight: #5968a3;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: "Noto Serif KR", serif, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    color: var(--text-color);
    line-height: 1.7;
    background-color: var(--background);
    display: flex;
    flex-direction: column;
    align-items: center;
}

.container {
    max-width: 768px;
    width: 100%;
    margin: 0 auto;
    padding: 20px;
    background-color: white;
}

.header {
    text-align: center;
    padding: 60px 0 30px;
}

.title {
    font-family: 'Cinzel', serif;
    font-weight: 500;
    color: #6bb4ff9c;
    font-size: 26px;
    letter-spacing: 3px;
}

.date-location {
    margin: 20px 0;
    font-family: "Noto Serif KR", serif, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    font-size: 16px;
    color: #5968a3;
    line-height: 1.8;
}

.divider {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 15px 0;
}

.divider .circle {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background-color: #ddd;
    margin: 0 5px;
}

.divider .circle.active {
    background-color: var(--main-color);
}

.main-image, .couple-photo {
    width: 100%;
    height: auto;
    margin: 20px 0;
}

.section {
    padding: 40px 20px;
    text-align: center;
}

.section-title {
    position: relative;
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    font-weight: 400;
    margin-bottom: 30px;
    color: var(--main-color);
}

.section-title::after {
    content: '';
    display: block;
    width: 20px;
    height: 1px;
    background-color: var(--main-color);
    position: absolute;
    bottom: -15px;
    left: 50%;
    transform: translateX(-50%);
}

.greeting {
    font-family: "Noto Serif KR", serif, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    font-size: 16px;
    line-height: 2;
    margin-bottom: 30px;
}

.gallery {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
}

.gallery-item {
    width: calc(33.33% - 10px);
    cursor: pointer;
    transition: transform 0.3s;
    -webkit-tap-highlight-color: transparent;
    position: relative;
    z-index: 1;
    touch-action: manipulation;
    /* Ïπ¥Ïπ¥Ïò§ÌÜ° Ïù∏Ïï± Î∏åÎùºÏö∞Ï†Ä Ìò∏ÌôòÏÑ± Í∞úÏÑ† */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    outline: none;
    border: 2px solid transparent;
}

.gallery-item:hover, .gallery-item:active, .gallery-item:focus {
    transform: scale(1.05);
    border-color: var(--main-color);
}

.gallery-item img {
    width: 100%;
    height: 100px;
    object-fit: cover;
    /* Ïπ¥Ïπ¥Ïò§ÌÜ° Ïù∏Ïï± Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú Ïù¥ÎØ∏ÏßÄ ÌÑ∞Ïπò Í∞úÏÑ† */
    pointer-events: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    justify-content: center;
    align-items: center;
    overflow: hidden;
    touch-action: none;
}

.modal-container {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 90%;
    max-width: 1200px;
}

.modal-content {
    display: block;
    width: auto;
    max-width: 90%;
    max-height: 80vh;
    margin: 0 auto;
    object-fit: contain;
}

.prev, .next {
    position: absolute;
    cursor: pointer;
    color: white;
    font-size: 40px;
    user-select: none;
    z-index: 1010;
}

.prev {
    left: 10px;
}

.next {
    right: 10px;
}

.close {
    position: absolute;
    top: 20px;
    right: 30px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
    z-index: 1010;
}

.btn {
    padding: 10px 20px;
    border-radius: 20px;
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-male {
    background-color: #6b96ff;
    color: white;
    border: none;
}

.handwritten-letter {
    background-color: #f8f8f8;
    border-radius: 10px;
    padding: 30px;
    margin: 40px 0;
    color: var(--main-color);
    font-family: "Noto Serif KR", serif;
    line-height: 2;
    text-align: center;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.letter-text {
    position: relative;
    margin-bottom: 15px;
}

.letter-text::after {
    content: '';
    display: block;
    width: 100%;
    height: 1px;
    background-color: #eee;
    margin-top: 15px;
}

.letter-sign {
    font-style: italic;
    text-align: right;
    padding-right: 20px;
}

.share-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 30px 0;
}

.share-button {
    padding: 10px 15px;
    background-color: #f0f0f0;
    border-radius: 5px;
    font-size: 14px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    border: none;
    color: #555;
}

.share-button:hover {
    background-color: #e0e0e0;
}

.guestbook {
    width: 100%;
    margin: 40px 0;
    padding: 20px;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.guestbook-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 30px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.form-group label {
    font-size: 14px;
    color: var(--light-text);
}

.form-group input, .form-group textarea {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-family: inherit;
}

.form-group textarea {
    min-height: 100px;
    resize: vertical;
}

.guestbook-submit {
    background-color: var(--main-color);
    color: white;
    border: none;
    padding: 10px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s;
}

.guestbook-submit:hover {
    background-color: #e05d5d;
}

.footer {
    text-align: center;
    padding: 20px;
    font-size: 12px;
    color: var(--light-text);
    background-color: #f9f9f9;
    width: 100%;
    margin-top: 30px;
}

@media (max-width: 768px) {
    .gallery-item {
        width: calc(50% - 10px);
        height: auto;
        aspect-ratio: 1/1;
    }
  
    .gallery-item img {
        height: 100%;
        object-fit: cover;
    }
  
    .section-title {
        font-size: 24px;
    }
    
    .greeting {
        font-size: 14px;
    }
    
    .handwritten-letter {
        padding: 20px;
    }
    
    .modal-container {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
  
    .prev, .next {
        font-size: 30px;
        background-color: rgba(0, 0, 0, 0.3);
        padding: 10px;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
  
    .close {
        top: 10px;
        right: 15px;
    }
  
    .modal-content {
        max-width: 100%;
        max-height: 80vh;
    }
}
</style>
</head>
<body>
<div class="container">
<div class="header">
    <h1 class="title">WEDDING NOTIFICATION</h1>
    <div class="divider">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle active"></div>
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>
    <div class="date-location">
        2025ÎÖÑ 6Ïõî 3Ïùº<br>
        Îëê ÏÇ¨ÎûåÏù¥ ÌïòÎÇòÍ∞Ä ÎêòÏóàÏäµÎãàÎã§
    </div>
</div>

<img src="https://picsum.photos/800/600?random=1" alt="Wedding Venue" class="main-image">

<div class="section">
    <h2 class="section-title">Í≤∞ÌòºÏùÑ ÏïåÎ¶ΩÎãàÎã§</h2>
    <div class="greeting">
        ÏÑúÎ°ú Îã§Î•∏ Îëê ÏÇ¨ÎûåÏù¥ ÎßåÎÇò<br>
        ÏÇ¨ÎûëÏúºÎ°ú ÌïòÎÇòÍ∞Ä ÎêòÏñ¥<br>
        ÏÉàÎ°úÏö¥ Ïù∏ÏÉùÏùÑ ÏãúÏûëÌïòÍ≤å ÎêòÏóàÏäµÎãàÎã§.<br><br>
        Î∂ÄÏ°±Ìïú Ï†ÄÌù¨ÏóêÍ≤å Î≥¥ÎÇ¥Ï£ºÏã†<br>
        Îî∞ÎúªÌïú Í¥ÄÏã¨Í≥º ÏÇ¨ÎûëÏóê Í∞êÏÇ¨ÎìúÎ¶¨Î©∞<br>
        ÏïûÏúºÎ°úÎèÑ ÎßéÏùÄ Í≤©Î†§ Î∂ÄÌÉÅÎìúÎ¶ΩÎãàÎã§.
    </div>
    <div class="parents">
        Î∞∞Î™ÖÏÑ†Ïùò ÏïÑÎì§ <strong>ÏÑ±Ìò∏</strong><br>
        ÍπÄÎ≥ëÏàò ¬∑ Ï†ïÌï¥Ï£ºÏùò Îî∏ <strong>Ïú†Ïõê</strong>
    </div>
</div>

<img src="https://picsum.photos/800/600?random=2" alt="Couple Photo" class="couple-photo">

<div class="section">
    <h2 class="section-title">Í∞§Îü¨Î¶¨</h2>
    <div class="gallery" id="photoGallery">
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=3" alt="Wedding Photo 1" data-index="1">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=4" alt="Wedding Photo 2">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=5" alt="Wedding Photo 3">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=6" alt="Wedding Photo 4">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=7" alt="Wedding Photo 5">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=8" alt="Wedding Photo 6">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=9" alt="Wedding Photo 7">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=10" alt="Wedding Photo 8">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=11" alt="Wedding Photo 9">
        </div>
        <div class="gallery-item">
            <img src="https://picsum.photos/400/400?random=12" alt="Wedding Photo 10">
        </div>
    </div>
</div>

<div class="section">
    <h2 class="section-title">ÏÉàÎ°úÏö¥ ÏãúÏûë</h2>
    <div class="location-info">
        Ï§ëÏöîÌïú ÏãúÏûëÏùò ÏàúÍ∞ÑÏóê <br>
        Í∞êÏÇ¨Ìïú Î∂ÑÎì§ÏùÑ Ìïú ÏûêÎ¶¨Ïóê Î™®ÏÖîÏïº ÎßàÎïÖÌïòÏßÄÎßå <br>
        Ï†ÄÌù¨ Îëê ÏÇ¨ÎûåÏùò ÎúªÏóê Îî∞Îùº Í≤∞ÌòºÏãùÏùÄ ÏÉùÎûµÌïòÍ≥†<br>
        Í∞ÄÏ°±Îì§Í≥ºÏùò ÏãúÍ∞ÑÏúºÎ°ú ÎåÄÏ≤¥ÌïòÍ∏∞Î°ú ÌïòÏòÄÏäµÎãàÎã§. <br><br>
        ÎÑàÍ∑∏Îü¨Ïö¥ ÎßàÏùåÏúºÎ°ú Ï∂ïÌïòÏùò ÌïúÎßàÎîî Ìï¥Ï£ºÏãúÎ©¥<br>
        ÌèâÏÉù ÏÜåÏ§ëÌûà Í∞ÑÏßÅÌïòÎ©∞ ÏÇ¥Í≤†ÏäµÎãàÎã§.
    </div>
</div>

<div class="handwritten-letter">
    <div class="letter-text">Îëê ÏÇ¨ÎûåÏù¥ Ìï®Íªò Í±∏Ïñ¥Í∞à Í∏∏Ïù¥</div>
    <div class="letter-text">Ïñ∏Ï†úÎÇò ÏÇ¨ÎûëÍ≥º ÌñâÎ≥µÏúºÎ°ú Í∞ÄÎìùÌïòÍ∏∏</div>
    <div class="letter-text">Îî∞ÎúªÌïú ÎßàÏùåÏúºÎ°ú ÏßÄÏºúÎ¥ê Ï£ºÏÑ∏Ïöî</div>
    <div class="letter-sign">- ÏÑ±Ìò∏ & Ïú†Ïõê -</div>
</div>

<div class="section">
    <h2 class="section-title">Ï∂ïÌïòÏôÄ Í≤©Î†§Ïùò ÎßàÏùåÏùÑ Ï†ÑÌïòÏÑ∏Ïöî</h2>
    <div class="guestbook">
        <form class="guestbook-form" id="guestbookForm">
            <div class="form-group">
                <label for="guestName">Ïù¥Î¶Ñ</label>
                <input type="text" id="guestName" required>
            </div>
            <div class="form-group">
                <label for="guestMessage">Î©îÏãúÏßÄ</label>
                <textarea id="guestMessage" required></textarea>
            </div>
            <button type="submit" class="guestbook-submit">Ï∂ïÌïò Î©îÏãúÏßÄ Ï†ÑÏÜ°</button>
        </form>
    </div>
</div>

<div class="share-buttons">
    <button class="share-button" onclick="copyLink()">ÎßÅÌÅ¨ Î≥µÏÇ¨</button>
</div>
</div>

<div id="imageModal" class="modal">
  <span class="close" onclick="closeModal()">&times;</span>
  <div class="modal-container">
    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
    <img class="modal-content" id="modalImage">
    <a class="next" onclick="plusSlides(1)">&#10095;</a>
  </div>
</div>

<div class="footer">
Copyright ¬© 2025 Wedding. All rights reserved.
</div>

<script>
// Ï†ÑÏó≠ Î≥ÄÏàò Î∞è ÏÉÅÏàò
let slideIndex = 1;
let touchStartX = 0;
let touchEndX = 0;
const modalElement = document.getElementById('imageModal');
const modalImage = document.getElementById('modalImage');
const googleScriptUrl = "https://script.google.com/macros/s/AKfycbxOYPrBfGxApYH-8ffsgxJwjHc380NAyJPmZcy52YoDW-2wnShRLuK0KIxLMJyIo1sKCQ/exec";

// Ï¥àÍ∏∞Ìôî Ìï®Ïàò - DOMContentLoadedÏóêÏÑú Î™®Îì† Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Îì±Î°ù
document.addEventListener('DOMContentLoaded', function() {
    initializeGallery();
    initializeModal();
    initializeGuestbook();
    preloadImages();
});

// Í∞§Îü¨Î¶¨ Ï¥àÍ∏∞Ìôî - Ïπ¥Ïπ¥Ïò§ÌÜ° Ïù∏Ïï± Î∏åÎùºÏö∞Ï†Ä Ìò∏ÌôòÏÑ± Í∞úÏÑ†
function initializeGallery() {
    const galleryItems = document.querySelectorAll('.gallery-item');
    
    galleryItems.forEach((item, index) => {
        // Ïó¨Îü¨ Ïù¥Î≤§Ìä∏ ÌÉÄÏûÖÏùÑ ÎèôÏãúÏóê Îì±Î°ùÌïòÏó¨ Ìò∏ÌôòÏÑ± Í∞úÏÑ†
        const events = ['click', 'touchend', 'touchstart'];
        
        events.forEach(eventType => {
            item.addEventListener(eventType, function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // touchstartÎäî Î™®Îã¨ÏùÑ Ïó¥ÏßÄ ÏïäÍ≥† Îã®ÏàúÌûà ÌôúÏÑ±ÌôîÎßå
                if (eventType === 'touchstart') {
                    item.style.borderColor = 'var(--main-color)';
                    return;
                }
                
                // clickÍ≥º touchendÏóêÏÑú Î™®Îã¨ Ïó¥Í∏∞
                if (eventType === 'click' || eventType === 'touchend') {
                    console.log('Gallery item clicked/touched:', index + 1);
                    openModal();
                    currentSlide(index + 1);
                }
            }, { passive: false });
        });
        
        // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏ Ï¢ÖÎ£å Ïãú Ïä§ÌÉÄÏùº Ï¥àÍ∏∞Ìôî
        item.addEventListener('touchcancel', function() {
            item.style.borderColor = 'transparent';
        });
        
        // ÎßàÏö∞Ïä§ Î¶¨Î∏å Ïãú Ïä§ÌÉÄÏùº Ï¥àÍ∏∞Ìôî (Îç∞Ïä§ÌÅ¨ÌÜ±Ïö©)
        item.addEventListener('mouseleave', function() {
            item.style.borderColor = 'transparent';
        });
        
        // Ìè¨Ïª§Ïä§ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä (ÌÇ§Î≥¥Îìú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÏßÄÏõê)
        item.setAttribute('tabindex', '0');
        item.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                openModal();
                currentSlide(index + 1);
            }
        });
    });
    
    // Ïπ¥Ïπ¥Ïò§ÌÜ° Ïù∏Ïï± Î∏åÎùºÏö∞Ï†Ä Í∞êÏßÄ Î∞è ÎåÄÏ≤¥ Ïù¥Î≤§Ìä∏ Îì±Î°ù
    if (isKakaoInAppBrowser()) {
        console.log('Ïπ¥Ïπ¥Ïò§ÌÜ° Ïù∏Ïï± Î∏åÎùºÏö∞Ï†Ä Í∞êÏßÄÎê®');
        addKakaoCompatibilityFixes();
    }
}

// Ïπ¥Ïπ¥Ïò§ÌÜ° Ïù∏Ïï± Î∏åÎùºÏö∞Ï†Ä Í∞êÏßÄ Ìï®Ïàò
function isKakaoInAppBrowser() {
    const userAgent = navigator.userAgent.toLowerCase();
    return userAgent.includes('kakaotalk') || 
           userAgent.includes('kakao') ||
           (userAgent.includes('mobile') && window.DeviceMotionEvent === undefined);
}

// Ïπ¥Ïπ¥Ïò§ÌÜ° Ìò∏ÌôòÏÑ± ÏàòÏ†ï Ìï®Ïàò
function addKakaoCompatibilityFixes() {
    const galleryItems = document.querySelectorAll('.gallery-item');
    
    galleryItems.forEach((item, index) => {
        // ÎåÄÏ≤¥ Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨ Ï∂îÍ∞Ä
        item.addEventListener('mousedown', function(e) {
            setTimeout(() => {
                openModal();
                currentSlide(index + 1);
            }, 100);
        });
        
        // ÎçîÎ∏îÌÉ≠ Ïù¥Î≤§Ìä∏ ÏßÄÏõê
        let tapCount = 0;
        item.addEventListener('touchend', function(e) {
            tapCount++;
            if (tapCount === 1) {
                setTimeout(() => {
                    if (tapCount === 1) {
                        openModal();
                        currentSlide(index + 1);
                    }
                    tapCount = 0;
                }, 300);
            }
        });
    });
}

// Î™®Îã¨ Ï¥àÍ∏∞Ìôî
function initializeModal() {
    const modalContainer = document.querySelector('.modal-container');
    if (modalContainer) {
        modalContainer.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        }, false);
        
        modalContainer.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, false);
    }
    
    // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
    window.onclick = function(event) {
        if (event.target == modalElement) {
            closeModal();
        }
    }
    
    // ÌÇ§Î≥¥Îìú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò
    document.onkeydown = function(e) {
        if (modalElement.style.display === "flex") {
            if (e.key === "ArrowLeft") {
                plusSlides(-1);
            } else if (e.key === "ArrowRight") {
                plusSlides(1);
            } else if (e.key === "Escape") {
                closeModal();
            }
        }
    }
}

// Î∞©Î™ÖÎ°ù Ï¥àÍ∏∞Ìôî
function initializeGuestbook() {
    const guestbookForm = document.getElementById('guestbookForm');
    if (guestbookForm) {
        guestbookForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('guestName').value;
            const message = document.getElementById('guestMessage').value;
            
            if (name && message) {
                saveGuestbookEntry(name, message);
                sendToSlack(name, message);
                guestbookForm.reset();
            }
        });
    }
}

// Ïù¥ÎØ∏ÏßÄ ÌîÑÎ¶¨Î°úÎìú
function preloadImages() {
    const galleryImages = document.querySelectorAll('.gallery-item img');
    galleryImages.forEach(img => {
        const preloadImg = new Image();
        preloadImg.src = img.src;
    });
}

// Î™®Îã¨ Í¥ÄÎ†® Ìï®ÏàòÎì§
function openModal() {
    modalElement.style.display = "flex";
    const scrollY = window.scrollY;
    document.body.style.position = 'fixed';
    document.body.style.width = '100%';
    document.body.style.top = `-${scrollY}px`;
    document.body.style.overflow = 'hidden';
    document.body.dataset.scrollY = scrollY;
}

function closeModal() {
    modalElement.style.display = "none";
    const scrollY = document.body.dataset.scrollY;
    document.body.style.position = '';
    document.body.style.width = '';
    document.body.style.top = '';
    document.body.style.overflow = '';
    window.scrollTo(0, parseInt(scrollY || '0'));
}

function plusSlides(n) {
    slideIndex += n;
    showSlides();
}

function currentSlide(n) {
    slideIndex = n;
    showSlides();
}

function showSlides() {
    const galleryImages = document.querySelectorAll('.gallery-item img');
    const totalImages = galleryImages.length;
    
    if (slideIndex > totalImages) {
        slideIndex = 1;
    }
    if (slideIndex < 1) {
        slideIndex = totalImages;
    }
    
    modalImage.src = '';
    const img = new Image();
    img.onload = function() {
        modalImage.src = this.src;
    };
    img.src = galleryImages[slideIndex-1].src;
}

function handleSwipe() {
    if (touchEndX < touchStartX - 50) {
        plusSlides(1);
    } else if (touchEndX > touchStartX + 50) {
        plusSlides(-1);
    }
}

// Î∞©Î™ÖÎ°ù Í¥ÄÎ†® Ìï®ÏàòÎì§
function saveGuestbookEntry(name, message) {
    const entries = JSON.parse(localStorage.getItem('weddingGuestbook') || '[]');
    const newEntry = {
        name: name,
        message: message,
        date: new Date().toISOString()
    };
    entries.push(newEntry);
    localStorage.setItem('weddingGuestbook', JSON.stringify(entries));
}

function sendToSlack(name, message) {
    const data = {
        name: name,
        message: message,
        date: formatDate(new Date())
    };
    
    const url = new URL(googleScriptUrl);
    url.searchParams.append('name', data.name);
    url.searchParams.append('message', data.message);
    url.searchParams.append('date', data.date);

    fetch(url.toString(), {
        method: 'GET',
        mode: 'no-cors',
    })
    .then(() => {
        console.log("Ïä¨Îûô ÏöîÏ≤≠ ÏôÑÎ£å");
        showNotification("Ï∂ïÌïò Î©îÏãúÏßÄÍ∞Ä Ï†ÑÏÜ°ÎêòÏóàÏäµÎãàÎã§. Í∞êÏÇ¨Ìï©ÎãàÎã§! üíå");
    })
    .catch(error => {
        console.error("Ïä¨Îûô ÏöîÏ≤≠ Ïò§Î•ò:", error);
        showNotification("Ï∂ïÌïò Î©îÏãúÏßÄÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§. Í∞êÏÇ¨Ìï©ÎãàÎã§! üíå");
    });
}

// Ïú†Ìã∏Î¶¨Ìã∞ Ìï®ÏàòÎì§
function formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}.${month}.${day}`;
}

function copyLink() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => {
        alert('ÎßÅÌÅ¨Í∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§.');
    }).catch(() => {
        // Ìè¥Î∞±
        const dummy = document.createElement('input');
        document.body.appendChild(dummy);
        dummy.value = url;
        dummy.select();
        document.execCommand('copy');
        document.body.removeChild(dummy);
        alert('ÎßÅÌÅ¨Í∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§.');
    });
}

function showNotification(message) {
    const existingNotification = document.querySelector('.notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    
    Object.assign(notification.style, {
        position: 'fixed',
        bottom: '20px',
        left: '50%',
        transform: 'translateX(-50%)',
        backgroundColor: 'var(--main-color)',
        color: 'white',
        padding: '12px 20px',
        borderRadius: '30px',
        boxShadow: '0 2px 10px rgba(0,0,0,0.2)',
        zIndex: '1000',
        fontSize: '14px',
        fontWeight: '500',
        opacity: '0',
        transition: 'opacity 0.3s ease-in-out'
    });
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.opacity = '1';
    }, 10);
    
    setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 3000);
}
</script>
</body>
</html>
